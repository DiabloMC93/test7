<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen de Enfermer铆a Geri谩trica - Bloque 3</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #f1f5f9;
        }

        .option-card {
            transition: all 0.2s ease;
            cursor: pointer;
            border: 2px solid #334155;
        }

        .option-card:hover {
            border-color: #6366f1;
            background-color: #1e293b;
        }

        .option-card.correct {
            border-color: #22c55e;
            background-color: #064e3b;
        }

        .option-card.incorrect {
            border-color: #ef4444;
            background-color: #7f1d1d;
        }

        .progress-bar {
            transition: width 0.4s ease-in-out;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">

    <!-- Header / Stats -->
    <div class="max-w-3xl w-full mb-6 grid grid-cols-3 gap-4">
        <div class="bg-slate-800 p-4 rounded-xl text-center border border-slate-700 shadow-lg">
            <p class="text-xs uppercase tracking-wider text-slate-400">Progreso</p>
            <p id="current-index" class="text-xl md:text-2xl font-bold">1 / 21</p>
        </div>
        <div class="bg-slate-800 p-4 rounded-xl text-center border border-slate-700 shadow-lg">
            <p class="text-xs uppercase tracking-wider text-green-400">Aciertos</p>
            <p id="correct-count" class="text-xl md:text-2xl font-bold text-green-500">0</p>
        </div>
        <div class="bg-slate-800 p-4 rounded-xl text-center border border-slate-700 shadow-lg">
            <p class="text-xs uppercase tracking-wider text-red-400">Errores</p>
            <p id="wrong-count" class="text-xl md:text-2xl font-bold text-red-500">0</p>
        </div>
    </div>

    <!-- Progress Bar -->
    <div class="max-w-3xl w-full bg-slate-800 h-2 rounded-full mb-8 overflow-hidden">
        <div id="progress" class="progress-bar bg-indigo-500 h-full" style="width: 0%"></div>
    </div>

    <!-- Main Game Container -->
    <main id="game-container" class="max-w-3xl w-full bg-slate-800 rounded-2xl p-6 md:p-8 shadow-2xl border border-slate-700">
        <div id="question-screen">
            <div id="topic-badge" class="mb-4 inline-block px-3 py-1 bg-indigo-900/50 text-indigo-300 text-xs font-bold rounded-full border border-indigo-700 hidden">
                TEMA 13
            </div>
            <h2 id="question-text" class="text-lg md:text-xl font-semibold mb-8 leading-relaxed">
                Cargando pregunta...
            </h2>
            <div id="options-container" class="space-y-3">
                <!-- Options injected here -->
            </div>
            <button id="next-btn" class="mt-8 w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-4 rounded-xl transition shadow-lg hidden">
                Continuar
            </button>
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="hidden text-center py-10">
            <h2 class="text-3xl font-bold mb-4">隆Bloque Completado!</h2>
            <div class="text-6xl mb-6"></div>
            <p id="final-stats" class="text-lg text-slate-300 mb-8"></p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <button onclick="location.reload()" class="bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 px-8 rounded-xl transition">
                    Repetir Bloque
                </button>
            </div>
        </div>
    </main>

    <script>
        // Data mapped from user input (normalized IDs for the quiz logic)
        const questions = [
            { id: 108, q: "En los cambios biol贸gicos del proceso de envejecimiento debemos destacar:", options: ["el deterioro generalizado y progresivo de todos os sistemas que componen en organismo", "el deterioro social del individuo", "el deterioro principal del aspecto exterior del individuo", "el deterioro biol贸gico del entorno del individuo"], correct: 0 },
            { id: 109, q: "En las manifestaciones a nivel del sistema musculoesquel茅tico del envejecimiento debemos destacar:", options: ["disminuci贸n de la masa 贸sea y su desmineralizaci贸n", "disminuci贸n de la talla y la cirrosis dorsal", "alteraci贸n del eje mec谩nico, equilibro corporal, alineaci贸n y marcha", "Todas son ciertas"], correct: 3 },
            { id: 110, q: "Otros factores biol贸gicos a tener en cuenta en el envejecimiento, en la referencia al mantenimiento de la independencia funcional son:", options: ["la insuficiencia cardiaca presente en una gran mayor铆a de ancianos", "la arteriosclerosis", "la insuficiencia del fuelle a贸rtico", "las rigideces vasculares"], correct: 1 },
            { id: 111, q: "El aumento de la respiraci贸n abdominal, la disminuci贸n del peso y volumen pulmonar, la reducci贸n de alveolos, la dilaci贸n de conductos, as铆 como al disyunci贸n pulmonar son debido a:", options: ["enfisema pulmonar en el anciano", "bronquitis cr贸nica en el anciano", "Pulm贸n senil del anciano", "insuficiencia cardiaca congestiva en el anciano"], correct: 2 },
            { id: "1 (bis)", q: "A grandes rasgos destacamos algunas modificaciones biol贸gicas de la vejes, como:", options: ["Definici贸n en la masticaci贸n, motilidad e hipoperistaltismo", "Disminuci贸n del filtrado glomerular y tono muscular de la vejiga. Disminuci贸n de la producci贸n hormonal. Disminuci贸n de la respuesta inmunitaria", "Disminuci贸n del tama帽o y peso del cerebro, enlentecimiento generalizado del movimiento y disminuci贸n de la sensibilidad", "Todas son ciertas"], correct: 3 },
            { id: "2 (bis)", q: "Desde el campo de la visi贸n y respecto al envejecimiento debemos de mostrar especial cuidado en valorar la:", options: ["Perdida de agudeza y la disminuci贸n del campo visual, que junto a la aparici贸n de la opacidad del cristalino, merma la independencia funcional del anciano", "Aumento del arco senil, la ptosis y la disminuci贸n de la secreci贸n lagrimal", "A y B son correctas", "Todas son falsas"], correct: 2 },
            { id: "1 (ter)", q: "En el an谩lisis de las necesidades del anciano hay que tener en cuenta:", options: ["La capacidad residual que mantiene 谩gil al anciano", "Las enfermedades cr贸nicas y agudas con cominantes", "Los cambios fisiol贸gicos, la capacidad de independencia y los factores que intervienen en la satisfacci贸n de las necesidades y condicionan su autonom铆a", "La A y C son verdaderas"], correct: 2 },
            { id: "2 (ter)", q: "El patr贸n respiratorio ineficaz, limpieza ineficaz de las v铆as a茅reas y riesgo de aspiraci贸n, son en definitiva:", options: ["El resultado de la valoraci贸n de un paciente", "Algunas etiquetas diagnosticas de enfermeria", "Aspectos cl铆nicos de una neumon铆a senil", "La A y B son ciertas"], correct: 1 },
            { id: "3 (ter)", q: "El anciano conoce los alimentos y nutrientes que toma, los adquiere, tiene recursos, los elige y elabora, los ingiere y digiere con normalidad. Esto nos indica que:", options: ["El anciano dispone de los recursos sociales necesarios para alimentarse", "El anciano tiene un nivel de estudios adecuado que le permite alimentarse", "El anciano esta bien ps铆quicamente para comer solo en casa", "El anciano manifiesta su independencia respecto a la necesidad de comer y alimentarse"], correct: 3 },
            { id: "4 (ter)", q: "La valoraci贸n peri贸dica de las 谩reas funcionales, adecuaci贸n del hogar, visita al odont贸logo, evaluaci贸n de alimentaci贸n y potenciar el acto de comer socialmente:", options: ["Estimula el apetito y socializa al anciano", "Son algunas recomendaciones practicas para favorecer la autonom铆a en el anciano", "Son estudios a desarrollar por el enfermer@ de atenci贸n primaria", "A y C son ciertas"], correct: 1 },
            { id: "1 (T13)", q: "Desde el punto de vista de la necesidad de eliminaci贸n. Cuando el anciano mantiene patrones adecuados, conserva capacidades psicomotoras y mantiene h谩bitos higi茅nicos:", topic: "TEMA 13", options: ["El anciano ha aprendido la informaci贸n facilitada", "El anciano no necesita ayuda especializada de los servicios sociales", "El anciano es independiente respecto a la necesidad de eliminaci贸n", "Todas son falsas"], correct: 2 },
            { id: "2 (T13)", q: "Son manifestaciones de dependencia respecto a la necesidad de eliminaci贸n:", topic: "TEMA 13", options: ["El incremento de las micciones, perdidas de orina, urgencia urinaria, nicturia", "Polaquiuria", "Reducci贸n del chorro de micci贸n y esfuerzo excesivo al defecar", "Todas son correctas"], correct: 3 },
            { id: "3 (T13)", q: "La incontinencia urinaria de urgencia y la retenci贸n urinaria son:", topic: "TEMA 13", options: ["Una patolog铆a derivada de una hipertrofia maligna de pr贸stata", "Es una consecuencia l贸gica tras una histerectom铆a vaginal en la mujer senil mult铆para", "Son posibles etiquetas diagnosticas de enfermeria, respecto a la necesidad de eliminaci贸n", "Consecuencia de una infecci贸n por estafilococo"], correct: 2 },
            { id: "4 (T13)", q: "Entendemos que el anciano es dependiente respecto a la necesidad de moverse y mantener posturas adecuadas, cuando:", topic: "TEMA 13", options: ["Necesita ayuda para comer y prepararse la comida", "Necesita ayuda parcial o total para las actividades de la vida diaria (AVD)", "La A y B son verdaderas", "La A y B son falsas"], correct: 1 },
            { id: "5 (T13)", q: "Deterioro de movilidad f铆sica, deambulaci贸n, silla de ruedas, traslaci贸n, fatiga y riesgo de intolerancia a la actividad. Son etiquetas de:", topic: "TEMA 13", options: ["La necesidad del mantenimiento de la higiene corporal", "De la necesidad de eliminaci贸n", "De la necesidad de desarrollo social y estructura anat贸mica", "De la necesidad de moverse y mantener posturas adecuadas"], correct: 3 },
            { id: "1 (Sue帽o)", q: "驴Qu茅 entendemos por fase REM?", options: ["Es la respuesta efectiva muscular del anciano al ser estimulado en la regi贸n pretibial", "Es una de las fases del sue帽o", "Es la 煤ltima etapa del sue帽o", "B y C son correctas"], correct: 3 },
            { id: "2 (Sue帽o)", q: "A la hora de valorar al anciano conforme a la necesidad de dormir y descansar, debemos de prestar especial atenci贸n a:", options: ["Identificar rutinas y pautas de comportamiento habitual", "Identificar la medicaci贸n que toma", "Hablar con los vecinos y contrastar opiniones", "La C es falsa"], correct: 3 },
            { id: "3 (Sue帽o)", q: "Control de ingesta de l铆quidos, aumento de actividad f铆sica, entorno adecuado y prendas confortables, van encaminadas a:", options: ["Mantener un buen control de la diabetes tipo II", "La A es cierta pero solo cuando hay hiperglucemia mantenida", "Son acciones encaminadas a favorecer el dormir y descansar", "Son acciones que normalmente se realizan en hospitales geri谩tricos especializados"], correct: 2 },
            { id: "4 (Sue帽o)", q: "En el anciano, un aspecto externo descuidado, deterioro de piel, olor corporal, placa dental y halitosis, as铆 como uso exagerado de cosm茅ticos:", options: ["Existe alg煤n trastorno mental y adaptativo", "No se lava", "Tiene problemas sociales y familiares", "Todas son correctas"], correct: 0 }
        ];

        let currentQuestion = 0;
        let correctAnswers = 0;
        let wrongAnswers = 0;
        let answered = false;

        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const nextBtn = document.getElementById('next-btn');
        const currentIndexLabel = document.getElementById('current-index');
        const correctCountLabel = document.getElementById('correct-count');
        const wrongCountLabel = document.getElementById('wrong-count');
        const progressBar = document.getElementById('progress');
        const topicBadge = document.getElementById('topic-badge');
        const questionScreen = document.getElementById('question-screen');
        const resultScreen = document.getElementById('result-screen');
        const finalStats = document.getElementById('final-stats');

        function loadQuestion() {
            answered = false;
            nextBtn.classList.add('hidden');
            const qData = questions[currentQuestion];
            
            // Handle Topic Badge
            if (qData.topic) {
                topicBadge.innerText = qData.topic;
                topicBadge.classList.remove('hidden');
            } else {
                topicBadge.classList.add('hidden');
            }

            questionText.innerText = `${qData.id}. ${qData.q}`;
            currentIndexLabel.innerText = `${currentQuestion + 1} / ${questions.length}`;
            progressBar.style.width = `${((currentQuestion) / questions.length) * 100}%`;
            
            optionsContainer.innerHTML = '';
            qData.options.forEach((opt, index) => {
                const button = document.createElement('div');
                button.className = 'option-card p-4 rounded-xl flex items-center gap-4 bg-slate-800/50 border-slate-700';
                button.innerHTML = `
                    <span class="w-8 h-8 rounded-full bg-slate-700 flex items-center justify-center font-bold text-sm shrink-0">
                        ${String.fromCharCode(65 + index)}
                    </span>
                    <span class="text-md leading-tight">${opt}</span>
                `;
                button.onclick = () => selectOption(index, button);
                optionsContainer.appendChild(button);
            });
        }

        function selectOption(index, element) {
            if (answered) return;
            answered = true;
            
            const correctIndex = questions[currentQuestion].correct;
            const options = optionsContainer.children;

            if (index === correctIndex) {
                element.classList.add('correct');
                element.classList.remove('bg-slate-800/50');
                correctAnswers++;
                correctCountLabel.innerText = correctAnswers;
            } else {
                element.classList.add('incorrect');
                element.classList.remove('bg-slate-800/50');
                options[correctIndex].classList.add('correct');
                options[correctIndex].classList.remove('bg-slate-800/50');
                wrongAnswers++;
                wrongCountLabel.innerText = wrongAnswers;
            }

            nextBtn.classList.remove('hidden');
        }

        nextBtn.onclick = () => {
            currentQuestion++;
            if (currentQuestion < questions.length) {
                loadQuestion();
            } else {
                progressBar.style.width = "100%";
                showResults();
            }
        };

        function showResults() {
            questionScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            const score = Math.round((correctAnswers / questions.length) * 100);
            
            let message = "隆Sigue estudiando!";
            if(score >= 80) message = "隆Excelente nivel!";
            else if(score >= 50) message = "隆Buen trabajo!";

            finalStats.innerHTML = `
                <p class="text-2xl mb-4 font-semibold text-indigo-300">${message}</p>
                Aciertos: <span class="text-green-500 font-bold">${correctAnswers}</span><br>
                Errores: <span class="text-red-500 font-bold">${wrongAnswers}</span><br><br>
                <div class="text-5xl font-bold text-white mb-2">${score}%</div>
                <p class="text-sm text-slate-400">Puntuaci贸n total</p>
            `;
        }

        loadQuestion();
    </script>
</body>
</html>
